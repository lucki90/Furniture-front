<h3>Wizualizacja kuchni</h3>

<div *ngIf="cabinetPositions().length === 0" class="empty-state">
  Dodaj szafki, aby zobaczyc wizualizacje
</div>

<div *ngIf="cabinetPositions().length > 0">
  <p>
    Sciana: {{ wall().length }} mm |
    Zajete: {{ totalWidth() }} mm |
    Pozostalo: {{ remainingWidth() }} mm
  </p>

  <p *ngIf="!fitsOnWall()" class="warning">
    Szafki nie mieszcza sie na scianie!
  </p>

  <p *ngIf="fitsOnWall()" class="success">
    Szafki mieszcza sie
  </p>

  <!-- 2D VIEW -->
  <div class="wall" [style.width.px]="wallDisplayWidth()" [class.overflow]="!fitsOnWall()">
    <div
      class="cabinet"
      *ngFor="let c of cabinetPositions(); let i = index"
      [style.left.px]="getScaledX(c.x)"
      [style.width.px]="getScaledWidth(c.width)"
      [class.overflow]="getScaledX(c.x) + getScaledWidth(c.width) > wallDisplayWidth()"
    >
      {{ i + 1 }}
    </div>

    <!-- Remaining space indicator -->
    <div
      *ngIf="remainingWidth() > 0"
      class="remaining-space"
      [style.left.px]="getRemainingSpaceX()"
      [style.width.px]="getRemainingSpaceWidth()"
    >
    </div>
  </div>

  <div class="legend">
    <span class="legend-item">
      <span class="legend-box cabinet-legend"></span> Szafka
    </span>
    <span class="legend-item">
      <span class="legend-box remaining-legend"></span> Wolne miejsce
    </span>
  </div>
</div>
